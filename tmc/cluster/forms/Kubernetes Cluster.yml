layout:
  pages:
    - id: page_general
      sections:
        - id: section_project
          fields:
            - id: project
              display: dropDown
              signpostPosition: right-middle
        - id: section_deploymentName
          fields:
            - id: deploymentName
              display: textField
              signpostPosition: right-middle
        - id: section_name
          fields:
            - id: name
              display: textField
              state:
                visible: true
                read-only: false
              signpostPosition: right-middle
        - id: section_platform
          fields:
            - id: description
              display: textField
              state:
                visible: true
                read-only: false
              signpostPosition: right-middle
        - id: section_15b4028e
          fields:
            - id: platform
              display: dropDown
              state:
                visible: true
                read-only: false
              signpostPosition: right-middle
        - id: section_947d09bc
          fields:
            - id: clustergroup
              display: dropDown
              state:
                visible: true
                read-only: false
              signpostPosition: right-middle
      title: General
      state: {}
    - id: page_66479225
      sections:
        - id: section_4371a0bf
          fields:
            - id: highavailability
              display: checkbox
              state:
                visible: true
                read-only: false
              signpostPosition: right-middle
        - id: section_feb9bb9f
          fields:
            - id: workernodecount
              display: decimalField
              state:
                visible: true
                read-only: false
              signpostPosition: right-middle
        - id: section_9958d368
          fields:
            - id: controller
              display: dropDown
              state:
                visible:
                  - value: true
                    equals:
                      platform: tkgs
                  - value: false
                    notEqual:
                      platform: tkgs
                read-only: false
              signpostPosition: right-middle
        - id: section_3699a73b
          fields:
            - id: provisioner
              display: dropDown
              state:
                visible:
                  - value: true
                    notEmpty:
                      controller: ''
                read-only: false
              signpostPosition: right-middle
        - id: section_8486d2c0
          fields:
            - id: version
              display: dropDown
              state:
                visible:
                  - value: false
                    notEqual:
                      platform: tkgs
                  - value: true
                    notEmpty:
                      provisioner: ''
                read-only: false
              signpostPosition: right-middle
        - id: section_6df31b68
          fields:
            - id: nodesize
              display: dropDown
              state:
                visible:
                  - value: true
                    notEmpty:
                      provisioner: ''
                  - value: false
                    notEqual:
                      platform: tkgs
                read-only: false
              signpostPosition: right-middle
        - id: section_04a27dc1
          fields:
            - id: stroragetype
              display: dropDown
              state:
                visible:
                  - value: true
                    notEmpty:
                      provisioner: ''
                  - value: false
                    notEqual:
                      platform: tkgs
                read-only: false
              signpostPosition: right-middle
      title: Resources
      state: {}
schema:
  project:
    label: Project
    type:
      dataType: string
      isMultiple: false
    valueList:
      id: projects
      type: scriptAction
    constraints:
      required: true
  deploymentName:
    label: Deployment Name
    type:
      dataType: string
      isMultiple: false
    constraints:
      required: true
      max-value: 900
  name:
    label: Name
    description: Name of cluster
    signpost: Name of cluster
    type:
      dataType: string
      isMultiple: false
    constraints:
      required: true
  description:
    label: Description
    description: Description of cluster purpose
    signpost: Description of cluster purpose
    type:
      dataType: string
      isMultiple: false
    constraints:
      required: true
  platform:
    label: Platform
    description: Target platform for cluster
    signpost: Target platform for cluster
    type:
      dataType: string
      isMultiple: false
    default: tkgs
    valueList:
      - label: tkgs
        value: tkgs
      - label: eks
        value: eks
      - label: aks
        value: aks
    constraints:
      required: true
  clustergroup:
    label: Cluster Group
    description: Cluster Group to manage cluster
    signpost: Cluster Group to manage cluster
    type:
      dataType: string
      isMultiple: false
    valueList:
      id: com.tanzu.tmc/form_tmc_inputs
      type: scriptAction
      parameters:
        - $type:
            dataType: string
            isMultiple: false
          managementcluster: '``'
        - $type:
            dataType: string
            isMultiple: false
          provisioner: '``'
        - $type:
            dataType: string
            isMultiple: false
          platform: '``'
        - $type:
            dataType: string
            isMultiple: false
          action: '`form-clustergrouplist`'
    constraints:
      required: true
  highavailability:
    label: High Availability
    description: Highly Available Controller Configuration
    signpost: Highly Available Controller Configuration
    type:
      dataType: boolean
      isMultiple: false
    constraints: {}
  workernodecount:
    label: Worker Node Count
    description: Number of worker nodes for cluster
    signpost: Number of worker nodes for cluster
    type:
      dataType: decimal
      isMultiple: false
    default: 2
    constraints:
      max-value: 8
      min-value: 1
  controller:
    label: Controller
    description: The controlling service for the cluster
    signpost: The controlling service for the cluster
    type:
      dataType: string
      isMultiple: false
    default:
      - value: ''
        notEqual:
          platform: tkgs
    valueList:
      id: com.tanzu.tmc/form_tmc_inputs
      type: scriptAction
      parameters:
        - $type:
            dataType: string
            isMultiple: false
          managementcluster: '``'
        - $type:
            dataType: string
            isMultiple: false
          provisioner: '``'
        - $type:
            dataType: string
            isMultiple: false
          platform: platform
        - $type:
            dataType: string
            isMultiple: false
          action: '`form-managementclusterlist`'
    constraints:
      required: true
  provisioner:
    label: Provisioner
    description: TKGs Provisioner name
    signpost: TKGs Provisioner name
    type:
      dataType: string
      isMultiple: false
    default:
      - value: '#unset'
        notEqual:
          platform: tkgs
      - value: '#unset'
        notEmpty:
          controller: ''
    valueList:
      id: com.tanzu.tmc/form_tmc_inputs
      type: scriptAction
      parameters:
        - $type:
            dataType: string
            isMultiple: false
          managementcluster: controller
        - $type:
            dataType: string
            isMultiple: false
          provisioner: '``'
        - $type:
            dataType: string
            isMultiple: false
          platform: '``'
        - $type:
            dataType: string
            isMultiple: false
          action: '`form-provisionerlist`'
    constraints:
      required: true
  version:
    label: Version
    description: Kubernetes Release to configure the cluster with
    signpost: Kubernetes Release to configure the cluster with
    type:
      dataType: string
      isMultiple: false
    default:
      - value: '#unset'
        notEmpty:
          clustergroup: ''
    valueList:
      id: com.tanzu.tmc/form_tmc_inputs
      type: scriptAction
      parameters:
        - $type:
            dataType: string
            isMultiple: false
          managementcluster: controller
        - $type:
            dataType: string
            isMultiple: false
          provisioner: provisioner
        - $type:
            dataType: string
            isMultiple: false
          platform: platform
        - $type:
            dataType: string
            isMultiple: false
          action: '`form-versionlist`'
    constraints:
      required: true
  nodesize:
    label: Node Size
    description: The Virtual Machine Class to configure the cluster nodes with
    signpost: The Virtual Machine Class to configure the cluster nodes with
    type:
      dataType: string
      isMultiple: false
    default:
      - value: '#unset'
        notEmpty:
          platform: ''
      - value: '#unset'
        notEmpty:
          controller: ''
    valueList:
      id: com.tanzu.tmc/form_tmc_inputs
      type: scriptAction
      parameters:
        - $type:
            dataType: string
            isMultiple: false
          managementcluster: controller
        - $type:
            dataType: string
            isMultiple: false
          provisioner: provisioner
        - $type:
            dataType: string
            isMultiple: false
          platform: platform
        - $type:
            dataType: string
            isMultiple: false
          action: '`form-nodesizelist`'
    constraints:
      required: true
  stroragetype:
    label: Storage Class
    description: Storage Class to assign to cluster
    signpost: Storage Class to assign to cluster
    type:
      dataType: string
      isMultiple: false
    default:
      - value: '#unset'
        notEmpty:
          controller: ''
    valueList:
      id: com.tanzu.tmc/form_tmc_inputs
      type: scriptAction
      parameters:
        - $type:
            dataType: string
            isMultiple: false
          managementcluster: controller
        - $type:
            dataType: string
            isMultiple: false
          provisioner: provisioner
        - $type:
            dataType: string
            isMultiple: false
          platform: platform
        - $type:
            dataType: string
            isMultiple: false
          action: '`form-storageclasslist`'
    constraints:
      required: true
options:
  externalValidations: []
